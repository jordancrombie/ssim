# Server Configuration
PORT=3005
NODE_ENV=development
SESSION_SECRET=ssim-session-secret-change-in-prod

# Database Configuration (PostgreSQL)
# Shared database for multi-tenant SSIM instances
DATABASE_URL=postgresql://postgres:password@localhost:5432/ssim

# Store Identity (for multi-tenant database)
# Each SSIM instance identifies itself by domain
# STORE_DOMAIN is auto-derived from APP_BASE_URL if not set
# STORE_DOMAIN=ssim.banksim.ca
STORE_NAME=SSIM Store

# OIDC Provider Configuration (BSIM Auth Server)
# Add multiple providers as JSON array
# For local dev: use auth-dev.banksim.ca
# For production: use auth.banksim.ca
OIDC_PROVIDERS='[
  {
    "id": "bsim",
    "name": "BSIM Bank",
    "issuer": "https://auth-dev.banksim.ca",
    "clientId": "ssim-client",
    "clientSecret": "ece9c837b17bface1df34fe89d8c8e13bcf4f9e77c7a7681442952ebd9dd7015",
    "scopes": "openid profile email fdx:accountdetailed:read fdx:transactions:read"
  }
]'

# This application's base URL (for redirect URIs)
# For local dev: use ssim-dev.banksim.ca
# For production: use ssim.banksim.ca
APP_BASE_URL=https://ssim-dev.banksim.ca

# Open Banking API base URL
# For local dev: use openbanking-dev.banksim.ca
# For production: use openbanking.banksim.ca
OPENBANKING_BASE_URL=https://openbanking-dev.banksim.ca

# Session cookie settings (for production behind HTTPS proxy)
# Set to 'true' when running behind nginx/ALB with SSL termination
TRUST_PROXY=false

# Payment Integration (NSIM)
# Dev environment URLs
PAYMENT_API_URL=https://payment-dev.banksim.ca
PAYMENT_AUTH_URL=https://auth-dev.banksim.ca
PAYMENT_API_KEY=your-payment-api-key-here
MERCHANT_ID=ssim-merchant
PAYMENT_CLIENT_ID=ssim-client
PAYMENT_CLIENT_SECRET=ece9c837b17bface1df34fe89d8c8e13bcf4f9e77c7a7681442952ebd9dd7015

# Webhook Configuration
# Secret for verifying webhook signatures from NSIM
WEBHOOK_SECRET=your-webhook-secret-here

# WSIM (Wallet) Integration
# Enable wallet payments
WSIM_ENABLED=true
# WSIM auth server URL (for OAuth redirect flow)
WSIM_AUTH_URL=https://wsim-auth-dev.banksim.ca
# WSIM client credentials (same as registered in WSIM)
WSIM_CLIENT_ID=ssim-merchant
WSIM_CLIENT_SECRET=your-wsim-client-secret-here
# WSIM popup URL (for embedded popup checkout flow)
WSIM_POPUP_URL=https://wsim-auth-dev.banksim.ca
# WSIM Merchant API (for custom card selection UI - "API" checkout option)
WSIM_API_KEY=your-wsim-api-key-here
WSIM_API_URL=https://wsim-dev.banksim.ca/api/merchant
